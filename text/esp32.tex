\shorthandoff{'}
\begin{markdown*}{%
  hybrid,
  definitionLists,
  footnotes,
  inlineFootnotes,
  hashEnumerators,
  fencedCode,
  citations,
  citationNbsps,
  pipeTables,
  tableCaptions,
}

\chapter{Jaculus-esp32}

By adding hardware bindings to Jaculus-dcore, it is possible to create firmware for a specific platform. The version created as a part of this thesis is Jaculus-esp32.

Jaculus-esp32 is a Jaculus device firmware for the ESP32 and ESP32-S3 microcontrollers. It uses the ESP-IDF framework and supports connection to a computer via a serial port.

\section{Features}

Aside from the features provided by Jaculus-dcore, Jaculus-esp32 only implements control over the most basic peripherals, which are:

  - GPIO -- general-purpose input/output pins
  - ADC -- analog-to-digital converter
  - LEDC -- generator of PWM signals
  - Neopixel -- WS2812B smart LED strip

Jaculus-esp32 also implements a specialized event queue based on a FreeRTOS queue and supports scheduling events from an interrupt context. This is used in the GPIO feature, which generates events when the state of a pin changes through an interrupt.

Implementation of the Neopixel MFeature uses the SmartLeds\cite{smartleds} library. The library also allows the control of other types of smart LED strips, but for simplicity, only the WS2812B type is supported by the Neopixel MFeature. The MFeature implementation also nicely demonstrates the use of Jaculus-machine for wrapping existing C++ libraries.

\section{Usage}

The firmware can be flashed to the device manually using ESP-IDF tools or the Jaculus-tools application described in the next chapter.

The firmware uses the Jaculus-machine runtime at its core, meaning that adding new features to the runtime is done the same way described in Chapter \ref{chap:machine}.

\shorthandon{'}
\end{markdown*}
